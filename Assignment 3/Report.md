# Report_3

## 无线广播

可以把`n`个小镇看成图的节点，距离小于20km的两个小镇视为两节点连通，这两个节点波段不同，可以把这个问题转化为图论中的”图着色问题“。如果能满足用两种颜色，使每个节点着一种颜色，且相邻的节点颜色不同，则返回1，反之返回-1。

比如按照BFS的方式遍历图，则同一层的节点必然染相同颜色，否则向上查询到根时颜色会出现矛盾。可以先选择一个起点着色，然后利用图遍历对连通分量依次着色，从而判断能否满足条件。

## 旅行商

本题是一个有向无环图，需要寻找这个图中的最长路径，可以先对其进行拓扑排序。在拓扑排序的过程中需要加入入度为0的节点，在这个过程中维护最长路径的更新即可，等拓扑排序完成，也就得到最长路径。拓扑排序主要参照了教材。维护最长路径主要利用了以下两个公式：

从起点到某一点的最长路径 = max(从起点到其前一个点的最长路径加一，之前维护的到该点的最长路径)

总的最长路径 = max(从起点到当前考察节点的最长路径，之前维护的总的最长路径)

## 平均气温

建立2d树。给定了无序数组，需要求中位数。采用平均复杂度为线性的快速选择算法：与快速排序思想类似，区别在于每次递归只需要对主元一侧的子数组继续递归，而不是两侧都需要处理；并且找到中位数后算法将立即终止。

建树： 一层按x排序，一层按y排序。按层数轮流将平面上的点按 x 和 y 的中位数分成左右两部分， 作为中位数对应结点的左右子树， 再递归， 回溯后根据左右子树信息计算出当前子树的点权和与点数量。利用`qsort`排序完，取中间样本即可找到中位数节点。

区域查询： 从根节点向下递归查询，到达节点u。如果u对应区域在欲查询区域内， 则记录下u子树的点权和与点数量；如果u对应区域与欲查询区域仅是有交集，首先判断u对应的点坐标是否在范围内， 若是则记录下u信息。再判断左右子树是否与所求范围有交， 若有则递归查询。

